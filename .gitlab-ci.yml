stages:
  - build
  - test
  - deploy

build:
    stage: build
    image: node:18
    script:
      - cd client  
      - npm install 
      - unset CI
      - npm run build
    artifacts:
      paths:
      - client/build/  

lint: 
    stage: test
    script:
      - npm run lint

test: 
    stage: test
    script:
      - npm run test 

deploy-dev: 
    stage: deploy
    script:
      - npm run deploy-dev
    only: 
      - dev

deploy-prod: 
    stage: deploy
    script:
      - npm run deploy-prod
    only: 
      - master 

