include:
  - template: AWS/Deploy-ECS.gitlab-ci.yml

stages:
  - build
  - deploy

build_website:
  stage: build
  image: node:18
  script:
    - cd client/
    - npm install 
    - unset CI
    - npm run build
    - ls -R # List files for debugging
  artifacts:
    paths:
      - client/build/ # Ensure this path is correct

deploy:
  stage: deploy
  extends: .aws_deploy
  variables:
    AWS_REGION: your-aws-region
    AWS_ACCESS_KEY_ID: your-access-key
    AWS_SECRET_ACCESS_KEY: your-secret-key
    IMAGE_TAG: $CI_COMMIT_SHORT_SHA
  script:
    - echo "Deploying to AWS ECS..."
